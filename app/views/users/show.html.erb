<% content_for :sidebar do %>
	<p><i class="icon-user"></i> Usuário: <strong><%= link_to "@#{current_user.username}",  user_path(current_user.username) %></strong></p>
	<p><i class="icon-time"></i> Conta criada em: <strong><%= @user.created_at.strftime("%d/%m/%Y") %></strong></p>
	<hr>
	<p><%= link_to "Procurar Amigo", users_path %></p>
<% end -%>

<ul id="myTab" class="nav nav-tabs">
  <li class="active"><a href="#profile" data-toggle="tab">Timeline</a></li>
  <li><a href="#seguidores" data-toggle="tab">Seguidores</a></li>
  <li><a href="#seguindo" data-toggle="tab">Seguindo</a></li>
</ul>
<div id="myTabContent" class="tab-content">
  <div class="tab-pane fade in active" id="profile">
  	<h3>@<%= @user.username %>' profile</h3>
  	<h4>Total de posts: <%= @user.posts.count %></h4>
  	<hr>
		<% @user.posts.order('created_at desc').each do |post| %>
			<div class="well">
				<p><%= post.body %></p>
				<hr class="soften">
				<p class="muted"><small><%= time_ago_in_words(post.created_at) %></small></p>
			</div>
		<% end -%>
  </div>
  <div class="tab-pane fade" id="seguidores">
    <h3>Seguidores</h3>
		<ul>  
		  <% @user.inverse_friends.each do |user| %>  
		  <li><%= link_to user.username,  user_path(user.username) %></li>
		  <% end %>  
		</ul> 
  </div>
  <div class="tab-pane fade" id="seguindo">
		<h3>Seguindo</h3>

		<table>
		  <thead>
		    <tr>
		      <th></th>
		      <th></th>
		    </tr>
		  </thead>
		  <tbody>
		  	<% @user.friendships.each do |friendship| %>
		    <tr>
		      <td><%= link_to friendship.user.username, user_path(friendship.friend.username) %></td>
		      <td>
		      	<% if current_user.eql? @user %>
							<%= link_to 'Remover Amigo', friendship, method: :delete, class: 'btn btn-small btn-danger', confirm: 'Você tem certeza?' %>
						<% end -%>
		      </td>
		    </tr>
		    <% end -%>
		  </tbody>
		</table>
  </div>
</div>